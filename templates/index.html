<!DOCTYPE html>
<html>
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.css">
  <style>
    * {
      box-sizing: border-box;
    }
    
    .row {
      margin-left:-5px;
      margin-right:-5px;
    }
      
    .column_2 {
      float: left;
      width: 13.5%;
      padding: 5px;
    }
    .column_1 {
      float: left;
      width: 35%;
      padding: 5px;
    }
    
    /* Clearfix (clear floats) */
    .row::after {
      content: "";
      clear: both;
      display: table;
    }
    
    table {
      border-collapse: collapse;
      border-spacing: 0;
      width: 100%;
      border: 1px solid #ddd;
    }
    
    th, td {
      text-align: left;
      padding: 2px;
    }
    
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    </style>
</head>
<body>

<h2>Defi Kingdoms Matchmaker</h2>

<form action="ID" method="post">
  <label for="hero_ID_1">Hero ID #1:</label><br>
  <input type="text" id="hero_ID_1" name="hero_ID_1" value=""><br>
  <label for="hero_ID_2">Hero ID #2:</label><br>
  <input type="text" id="hero_ID_2" name="hero_ID_2" value=""><br>
  <input type="submit" value="See Genetic Makeup">
</form> 
<input id="matches" value="Find Matches" type="button" />
<p>Returns potential heroes</p>
<div class="row">
  <div class="column_1">
    <h2>Gene - Hero {{ hero_ID_1 }}</h2>
<table>
  <tr>
    <th>Gene</th>
    <th>D</th>
    <th>R1</th>
    <th>R2</th>
    <th>R3</th>
  </tr>
  {% for key in gene_details_1 %}
  <tr>
    <th>{{ key }}</th>
    {% for value in gene_details_1[key]%}
    <td>
    {{ gene_details_1[key][value] }}
    </td>
    {% endfor %}    
  </tr>
{% endfor %}   
</table>
</div>
<div class="column_1">
<h2>Gene - Hero {{ hero_ID_2 }}</h2>
<table>
  <tr>
    <th>Gene</th>
    <th>D</th>
    <th>R1</th>
    <th>R2</th>
    <th>R3</th>
  </tr>
  {% for key in gene_details_2 %}
  <tr>
    <th>{{ key }}</th>
    {% for value in gene_details_2[key]%}
    <td>
    {{ gene_details_2[key][value] }}
    </td>
    {% endfor %}    
  </tr>
{% endfor %} 
</table>
</div>
</div>

<h2> Potential Summon </h2>
<div class="row">
  {% for key in summon_result %}

  <div class="column_2">
    <table>
      <tr>
        <th>{{key}}</th>
        <th>Likelihood %</th>
      </tr>
      {% for sub_key in summon_result[key] %}
      <tr>
        <th>{{sub_key}}</th>
        <td>
          {{summon_result[key][sub_key]}}
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
  {% endfor %}  
</div>

<h2> Potential Matches in Auction House </h2>
<table id="data" class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Class Score</th>
      <th>Class </th>
      <th>Sub Class</th>
      <th>Rarity</th>
      <th>Generation</th>
      <th>Price</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.js"></script>
<script>
  $("#matches").on('click', function() {
    var matches
    $.ajax({
         'type': 'POST',
         'async': false,
         'url': '/api/update',
         'dataType' : 'json',
         'data': $('#hero_ID_1').serialize(), 
         'success': function(res) {    
          matches = res
         }, 
         'error': function(error) {    
          
         }
    })
    alert(JSON.stringify(matches))
    $('#data').DataTable({ 
      data : matches.data,
      columns: [
        {data: "ID"},
        {data: "Class Score"},
        {data: "Class"},
        {data: "Sub Class"},
        {data: "Rarity"},
        {data: "Generation"},
        {data: 'Price'}
      ]
    });
  });
 
</script>

</body>
</html>